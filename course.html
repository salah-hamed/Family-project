<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ù„ÙƒÙˆØ±Ø³ - Family Business</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; color: white; z-index: 9999; }
    .progress-bar { width: 100%; height: 10px; background: #ddd; border-radius: 5px; overflow: hidden; margin: 20px 0; }
    .progress { height: 100%; background: linear-gradient(90deg, #4CAF50, #45a049); transition: width 0.3s; }
    .course-header { text-align: center; color: white; margin-bottom: 40px; }
    .slide { display: none; background: white; border-radius: 20px; padding: 40px; margin-bottom: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); animation: slideIn 0.5s; }
    .slide.active { display: block; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    .lesson-title { font-size: 2.5em; color: #667eea; margin-bottom: 20px; text-align: center; }
    .step { background: #f8f9ff; border-left: 5px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 10px; }
    pre { background: #2d3748; color: #a0aec0; padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 14px; direction: ltr; text-align: left; }
    .link-btn { display: inline-block; background: #667eea; color: white; padding: 12px 24px; border-radius: 50px; text-decoration: none; margin: 10px 5px; transition: transform 0.2s; }
    .link-btn:hover { transform: scale(1.05); }
    .screenshot { max-width: 100%; height: auto; border-radius: 10px; margin: 20px 0; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .quiz { background: #e8f4fd; padding: 20px; border-radius: 10px; margin: 20px 0; }
    .quiz input { margin: 10px; padding: 10px; border: 2px solid #ddd; border-radius: 5px; }
    .nav-btns { text-align: center; margin: 40px 0; }
    .nav-btn { background: #667eea; color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 18px; cursor: pointer; margin: 0 10px; transition: background 0.3s; }
    .nav-btn:hover { background: #5a67d8; }
    .nav-btn:disabled { background: #ccc; cursor: not-allowed; }
    .certificate-btn { background: linear-gradient(45deg, #4CAF50, #45a049); margin-top: 40px; font-size: 20px; padding: 20px 40px; }
    #certificate { display: none; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 60px; text-align: center; border-radius: 20px; margin: 40px 0; }
    @media (max-width: 768px) { .slide { padding: 20px; } .lesson-title { font-size: 2em; } pre { font-size: 12px; } }
  </style>
  
  <!-- Firebase SDKs v10.14.1 [web:9] -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  
  <!-- jsPDF + html2canvas Ù„Ù„Ø´Ù‡Ø§Ø¯Ø© [web:16] -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <div id="loading" class="loading">
    <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒÙˆØ±Ø³... <div class="progress-bar"><div id="loadProgress" class="progress" style="width:0%"></div></div></div>
  </div>

  <div class="container" id="courseContent" style="display:none;">
    <div class="course-header">
      <h1>ğŸ“ ÙƒÙˆØ±Ø³ Family Business</h1>
      <p>Ø¨Ù†Ø§Ø¡ Ù…ÙˆÙ‚Ø¹ e-commerce ÙƒØ§Ù…Ù„ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© - Copy-Paste Method</p>
      <div class="progress-bar"><div id="userProgress" class="progress" style="width:0%"></div></div>
      <p id="progressText">ØªÙ‚Ø¯Ù…Ùƒ: 0%</p>
    </div>

    <!-- Ø§Ù„Ø¯Ø±Ø³ 1: Ø¥Ø¹Ø¯Ø§Ø¯ Firebase -->
    <div class="slide" id="slide1">
      <h2 class="lesson-title">Ø¯Ø±Ø³ 1: Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Console</h2>
      <div class="step">
        <p>Ø§ÙØªØ­ <a href="https://console.firebase.google.com/" target="_blank" class="link-btn">Firebase Console</a> â†’ New Project â†’ FamilyBusiness â†’ Create.[memory:4]</p>
        <img src="https://via.placeholder.com/800x400/667eea/white?text=Firebase+New+Project" alt="ØµÙˆØ±Ø© Firebase Console" class="screenshot">
      </div>
      <div class="step">
        <p>Ø§Ù†Ø³Ø® config Ø¯Ù‡ ÙÙŠ <code>app.js</code> (Ø³Ù†Ù†Ø´Ø¦Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹):</p>
        <pre id="firebaseConfig">// Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ù€ config Ø¨ØªØ§Ø¹Ùƒ
const firebaseConfig = {
  apiKey: "AIza...", // Ù…Ù† Project Settings
  authDomain: "familybusiness.firebaseapp.com",
  projectId: "familybusiness",
  // ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„
};
firebase.initializeApp(firebaseConfig);</pre>
        <a href="https://onecompiler.com/html/3x4c2829d" target="_blank" class="link-btn">Ø§Ø®ØªØ¨Ø± ÙÙŠ OneCompiler</a>
      </div>
      <div class="quiz">
        <p>Ø³Ø¤Ø§Ù„: Ù…Ø§ Ù‡Ùˆ projectIdØŸ <input type="radio" name="q1" value="a"> Ø§Ù„Ù…ÙØªØ§Ø­ <input type="radio" name="q1" value="b"> Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ âœ“</p>
        <button onclick="checkQuiz(1)">ØªØ­Ù‚Ù‚</button>
      </div>
    </div>

    <!-- Ø§Ù„Ø¯Ø±Ø³ 2: Authentication -->
    <div class="slide" id="slide2">
      <h2 class="lesson-title">Ø¯Ø±Ø³ 2: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <div class="step">
        <p>Authentication â†’ Get Started â†’ Email/Password â†’ Enable.</p>
        <img src="https://via.placeholder.com/800x400/764ba2/white?text=Firebase+Auth+Enable" alt="ØµÙˆØ±Ø© Auth" class="screenshot">
        <pre>import { getAuth, signInWithEmailAndPassword } from 'firebase/auth';
const auth = getAuth();
signInWithEmailAndPassword(auth, email, password).then(user => console.log('Ù…Ø±Ø­Ø¨Ø§', user));</pre>
      </div>
      <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³ Ù…Ø´Ø§Ø¨Ù‡Ø©: 3-Ù‡Ø§Ø³ØªÙ†Ø¬ GitHub Pages [web:15], 4-Firestore DB, 5-Admin Dashboard [memory:1], 6-E-commerce Orders, 7-Real-time Delivery, 8-PWA Mobile, 9-Payments InstaPay, 10-Deploy & Sell -->
    </div>

    <!-- ... Ø§Ø®ØªØµØ§Ø± Ù„Ù„Ù€ 10 Ø¯Ø±ÙˆØ³ (ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙƒÙ„Ù‡Ù… Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ† ÙƒÙ€ slide3 Ø¥Ù„Ù‰ slide10 Ù…Ø¹ Ø®Ø·ÙˆØ§ØªØŒ ÙƒÙˆØ¯ØŒ ØµÙˆØ±ØŒ quizzesØŒ Ù…Ø´Ø§ÙƒÙ„ Ø´Ø§Ø¦Ø¹Ø© Ù…Ø«Ù„ "Ù…Ø´ Ø´ØºØ§Ù„ login? ØªØ­Ù‚Ù‚ UID" [memory:3]) ... -->

    <div class="slide" id="slide10">
      <h2 class="lesson-title">Ø¯Ø±Ø³ 10: Ù†Ø´Ø± ÙˆØ§Ù„Ø¨ÙŠØ¹</h2>
      <div class="step">
        <p>GitHub â†’ salahhamed/family-project â†’ Settings â†’ Pages â†’ Deploy from branch main.[web:15]</p>
        <pre>git add . && git commit -m "Final" && git push</pre>
        <a href="https://salahhamed.github.io/family-project/" class="link-btn">Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¬Ø§Ù‡Ø²</a>
      </div>
      <p>Ù…Ø´Ø§ÙƒÙ„ Ø´Ø§Ø¦Ø¹Ø©: 404? Ø§Ù†ØªØ¸Ø± 5 Ø¯Ù‚Ø§Ø¦Ù‚. CORS? Ø£Ø¶Ù ÙÙŠ Firebase rules.</p>
    </div>

    <div class="nav-btns">
      <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      <button class="nav-btn certificate-btn" onclick="generateCertificate()" id="certBtn" style="display:none;">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ğŸ‰</button>
    </div>

    <div id="certificate">
      <h1>Ø´Ù‡Ø§Ø¯Ø© Ø¥ÙƒÙ…Ø§Ù„ ÙƒÙˆØ±Ø³ Family Business</h1>
      <p id="certName">Ø§Ù„Ø§Ø³Ù…: Ù…Ø­Ù…Ø¯ ØµÙ„Ø§Ø­</p>
      <p>ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ 10 Ø¯Ø±ÙˆØ³ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ù†Ø³Ø¨Ø© 100%!</p>
      <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: <span id="certDate"></span></p>
    </div>
  </div>

  <script>
    // Firebase Config - Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨ØªØ§Ø¹Ùƒ
    const firebaseConfig = { /* config Ù‡Ù†Ø§ */ };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    let currentSlide = 1;
    let totalSlides = 10;
    let userProgress = 0;
    let user = null;
    let userName = '';

    // ØªØ­Ù‚Ù‚ Ø§Ù„ÙˆØµÙˆÙ„
    auth.onAuthStateChanged(async (u) => {
      if (u) {
        user = u;
        const doc = await db.collection('users').doc(u.uid).get();
        if (doc.exists && doc.data().courseActive) {
          document.getElementById('loading').style.display = 'none';
          document.getElementById('courseContent').style.display = 'block';
          userName = doc.data().name || 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…';
          loadProgress();
        } else {
          alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙˆÙ„ Ù„Ù„ÙƒÙˆØ±Ø³. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù†.');
          auth.signOut();
        }
      }
    });

    function changeSlide(direction) {
      document.getElementById(`slide${currentSlide}`).classList.remove('active');
      currentSlide += direction;
      if (currentSlide > totalSlides) currentSlide = totalSlides;
      if (currentSlide < 1) currentSlide = 1;
      document.getElementById(`slide${currentSlide}`).classList.add('active');
      updateNav();
      saveProgress();
    }

    function updateNav() {
      document.getElementById('prevBtn').disabled = currentSlide === 1;
      document.getElementById('nextBtn').disabled = currentSlide === totalSlides;
      if (currentSlide === totalSlides) document.getElementById('certBtn').style.display = 'inline-block';
    }

    async function saveProgress() {
      userProgress = Math.round((currentSlide / totalSlides) * 100);
      document.getElementById('userProgress').style.width = userProgress + '%';
      document.getElementById('progressText').textContent = `ØªÙ‚Ø¯Ù…Ùƒ: ${userProgress}%`;
      await db.collection('users').doc(user.uid).update({ courseProgress: userProgress });
    }

    async function loadProgress() {
      const doc = await db.collection('users').doc(user.uid).get();
      if (doc.data().courseProgress) {
        userProgress = doc.data().courseProgress;
        document.getElementById('userProgress').style.width = userProgress + '%';
        document.getElementById('progressText').textContent = `ØªÙ‚Ø¯Ù…Ùƒ: ${userProgress}%`;
        currentSlide = Math.ceil((userProgress / 100) * totalSlides);
        document.getElementById(`slide${currentSlide}`).classList.add('active');
        updateNav();
      }
    }

    function checkQuiz(slideNum) {
      // Ù…Ù†Ø·Ù‚ Ø¨Ø³ÙŠØ· Ù„Ù„Ù€ quiz
      alert('ØµØ­ÙŠØ­! âœ…');
      changeSlide(0); // refresh
    }

    async function generateCertificate() {
      document.getElementById('certName').textContent = `Ø§Ù„Ø§Ø³Ù…: ${userName}`;
      document.getElementById('certDate').textContent = new Date().toLocaleDateString('ar');
      document.getElementById('certificate').style.display = 'block';
      setTimeout(() => {
        html2canvas(document.getElementById('certificate')).then(canvas => {
          const imgData = canvas.toDataURL('image/png');
          const pdf = new window.jspdf.jsPDF();
          const imgWidth = 210;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
          pdf.save(`Ø´Ù‡Ø§Ø¯Ø©-FamilyBusiness-${user.uid.substring(0,8)}.pdf`);
          document.getElementById('certificate').style.display = 'none';
        });
      }, 500);
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„ÙƒÙˆØ±Ø³
    document.getElementById('slide1').classList.add('active');
    updateNav();
  </script>
</body>
</html>
