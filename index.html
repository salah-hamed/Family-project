<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Family Project</title>
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script src="app.js"></script>
  
  <style>
    body { 
      font-family: system-ui; 
      background: linear-gradient(135deg, #FFD700, #FFA500); 
      text-align: center; 
      padding: 20px; 
      min-height: 100vh; 
    }
    h1 { font-size: 3rem; background: linear-gradient(45deg, #FFD700, white); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; }
    .btn { padding: 15px 30px; background: #FF6B35; color: white; text-decoration: none; border-radius: 50px; margin: 10px; display: inline-block; transition: all 0.3s; }
    .btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    .whatsapp { background: #25D366 !important; font-size: 1.2rem; }
    .instapay { background: #00C851 !important; font-size: 1.2rem; }
    .course-btn { background: linear-gradient(45deg, #4ECDC4, #44A08D) !important; }
    .projects { display: grid; grid-template-columns: repeat(auto-fit, 1fr); gap: 20px; max-width: 800px; margin: 40px auto; }
    .project { background: rgba(255,255,255,0.9); padding: 20px; border-radius: 20px; transition: transform 0.3s; }
    .project:hover { transform: translateY(-5px); }
    #admin-panel { display: none; background: rgba(0,0,0,0.9); color: white; padding: 25px; border-radius: 20px; margin: 30px auto; max-width: 600px; }
    input, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid #ccc; font-size: 1rem; }
    #user-status { 
      background: rgba(255,255,255,0.9); 
      padding: 15px; 
      border-radius: 15px; 
      margin: 20px auto; 
      max-width: 500px; 
      font-weight: bold; 
    }
    .status-logged-in { background: linear-gradient(45deg, #00C851, #27AE60) !important; color: white; }
    .status-guest { background: rgba(255,193,7,0.3); border: 2px solid #F39C12; }
    .status-active { background: linear-gradient(45deg, #4ECDC4, #44A08D) !important; color: white; }
  </style>
</head>
<body>
  <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
  <div id="user-status" class="status-guest">
    Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø¶ÙŠÙÙ†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ… | <a href="login.html" class="btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
  </div>

  <h1>ğŸš€ Family Project</h1>
  <p style="font-size: 1.3rem; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 15px; margin: 20px auto; max-width: 600px;">
    ØªØ¹Ù„Ù… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© ÙÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ØŒ Ø¹Ù„Ù… Ø¹Ø§Ø¦Ù„ØªÙƒ Ø¨Ø¯ÙˆÙ† Ø¯Ø±Ø§Ø³Ø© Ø³Ù†ÙŠÙ†!
  </p>
  
  <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 30px 0;">
    <a href="https://ipn.eg/S/salah.hamed3646/instapay/9kwYEE" class="btn instapay">ğŸ’° Ø§Ø¯ÙØ¹ Ø¹Ø¨Ø± Instapay</a>
    <a href="login.html" class="btn course-btn" id="course-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ±Ø³</a>
    <a href="https://wa.me/201508830993?text=Ù…Ø±Ø­Ø¨Ø§ØŒ Ù…Ù‡ØªÙ… Ø¨Ù€ Family Project" class="btn whatsapp">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨ Ø¯Ø¹Ù…</a>
  </div>
  
  <h2>â­ Ù…Ø´Ø§Ø±ÙŠØ¹ Demo</h2>
  <div id="projects-container" class="projects">
    <!-- Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡ØªØªØ­Ù…Ù‘Ù„ Ù‡Ù†Ø§ -->
  </div>

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø®ÙÙŠØ© -->
  <div id="admin-panel">
    <h3>ğŸ”§ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h3>
    <input id="admin-pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±: admin123">
    <button class="btn" onclick="toggleAdmin()">ÙØªØ­ Ø§Ù„Ù„ÙˆØ­Ø©</button>
    
    <div id="admin-content" style="display: none; margin-top: 20px;">
      <h4>ğŸ¯ ØªÙØ¹ÙŠÙ„ ÙƒÙˆØ±Ø³ Ù„Ø¹Ù…ÙŠÙ„</h4>
      <input id="user-email" placeholder="Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„">
      <button class="btn" onclick="activateUser()">ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³</button>
      
      <hr style="margin: 25px 0;">
      
      <h4>ğŸ“± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (Ù…Ø­Ù„Ù‘ÙŠ)</h4>
      <input id="proj-title" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹">
      <input id="proj-url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø±ÙˆØ¹">
      <textarea id="proj-desc" placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ±"></textarea>
      <button class="btn" onclick="addProject()">Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹</button>
      <div id="projects-list" style="margin-top: 15px;"></div>
    </div>
  </div>

  <script>
    const ADMIN_PASS = 'admin123';
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ù‘ÙŠØ©
    function loadProjects() {
      const projects = JSON.parse(localStorage.getItem('projects')) || [
        {title: 'ØªØ·Ø¨ÙŠÙ‚ ØªÙˆØµÙŠÙ„ Ù‚Ù‡ÙˆØ©', url: '#', desc: 'ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª realtime Ø¨Ù€ Firebase.'},
        {title: 'Ù…ØªØ¬Ø± Ù…Ù„Ø§Ø¨Ø³ ØªÙ‚Ù„ÙŠØ¯ÙŠØ©', url: '#', desc: 'Ù…Ù†ØµØ© ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙƒØ§Ù…Ù„Ø©.'},
        {title: 'ÙƒØªØ§Ø¨ ØªÙ„ÙˆÙŠÙ† Ø£Ø·ÙØ§Ù„', url: '#', desc: 'Ø­ÙØ¸ Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª Ù…Ø¹ Firebase Storage.'}
      ];
      
      let html = '';
      projects.forEach((p, i) => {
        html += `
          <div class="project">
            <h3>${p.title}</h3>
            <p>${p.desc}</p>
            <a href="${p.url}" target="_blank" class="btn" style="padding: 8px 20px; font-size: 0.9rem;">ğŸŒ Ø²ÙŠØ§Ø±Ø©</a>
            <button onclick="deleteProject(${i})" style="padding: 8px 20px; background: #e74c3c; margin-left: 10px;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
          </div>
        `;
      });
      document.getElementById('projects-container').innerHTML = html;
      document.getElementById('projects-list').innerHTML = html;
    }
    
    function addProject() {
      const title = document.getElementById('proj-title').value.trim();
      const url = document.getElementById('proj-url').value.trim();
      const desc = document.getElementById('proj-desc').value.trim();
      
      if (!title || !desc) {
        alert('Ø£ÙƒÙ…Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„ÙˆØµÙ');
        return;
      }
      
      const projects = JSON.parse(localStorage.getItem('projects')) || [];
      projects.push({ title, url, desc });
      localStorage.setItem('projects', JSON.stringify(projects));
      
      loadProjects();
      document.getElementById('proj-title').value = '';
      document.getElementById('proj-url').value = '';
      document.getElementById('proj-desc').value = '';
      alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹!');
    }
    
    function deleteProject(index) {
      const projects = JSON.parse(localStorage.getItem('projects'));
      projects.splice(index, 1);
      localStorage.setItem('projects', JSON.stringify(projects));
      loadProjects();
    }
    
    function toggleAdmin() {
      if (document.getElementById('admin-pass').value === ADMIN_PASS) {
        document.getElementById('admin-content').style.display = 'block';
        loadProjects();
      } else {
        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©!');
      }
    }
    
    async function activateUser() {
      const email = document.getElementById('user-email').value.trim();
      if (!email) {
        alert('Ø£Ø¯Ø®Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„');
        return;
      }
      
      try {
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase Ù…Ù† app.js
        await window.fpActivateCourseByEmail('admin@familyproject.com', email);
        alert(`âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³ Ù„Ù€ ${email} ÙÙŠ Firestore!`);
        document.getElementById('user-email').value = '';
      } catch (error) {
        alert('âŒ Ø®Ø·Ø£: ' + error.message);
      }
    }
    
    // Ø±Ø¨Ø· Ø­Ø§Ù„Ø© Ø§Ù„ÙŠÙˆØ²Ø± Ù…Ø¹ Firebase
    window.fpOnAuthStateChanged((user, hasAccess) => {
      const statusEl = document.getElementById('user-status');
      const courseBtn = document.getElementById('course-btn');
      
      if (user) {
        let statusText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user.email}`;
        let courseText = 'Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ±Ø³';
        
        if (hasAccess) {
          statusText += ' âœ… (Ø§Ù„ÙƒÙˆØ±Ø³ Ù…ÙØ¹Ù‘Ù„)';
          courseText = 'ÙØªØ­ Ø§Ù„ÙƒÙˆØ±Ø³';
        }
        
        statusEl.innerHTML = `
          ${statusText} | 
          <button onclick="window.fpSignOut().then(() => location.reload())" style="padding: 8px 15px; background: #e74c3c; border: none; color: white; border-radius: 20px; cursor: pointer; font-size: 0.9rem;">Ø®Ø±ÙˆØ¬</button> |
          <a href="admin.html" style="color: #2c3e50; font-weight: bold;">Ø£Ø¯Ù…Ù†</a>
        `;
        statusEl.className = hasAccess ? 'status-active' : 'status-logged-in';
      } else {
        statusEl.innerHTML = 'Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø¶ÙŠÙÙ†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ… | <a href="login.html" class="btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>';
        statusEl.className = 'status-guest';
      }
    });
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    loadProjects();
  </script>
</body>
</html>
