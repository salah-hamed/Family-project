<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Family Business</title>
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script src="app.js"></script>
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Segoe UI', system-ui, sans-serif; 
      background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 25%, #FAD0C4 50%, #FFD1FF 75%, #C4C4C4 100%); 
      min-height: 100vh; 
      padding: 15px; 
      line-height: 1.6;
    }
    .container { max-width: 1200px; margin: 0 auto; text-align: center; }
    h1 { 
      font-size: clamp(2.5rem, 8vw, 4rem); 
      background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #F9CA24); 
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent; 
      margin: 20px 0; 
      animation: glow 2s ease-in-out infinite alternate;
    }
    @keyframes glow { from { text-shadow: 0 0 20px #FF6B6B; } to { text-shadow: 0 0 30px #4ECDC4; } }
    .hero-text { 
      font-size: clamp(1.1rem, 4vw, 1.4rem); 
      background: rgba(255,255,255,0.95); 
      padding: 25px; 
      border-radius: 25px; 
      margin: 25px auto; 
      max-width: 700px; 
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    .btn-group { 
      display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 40px 0; 
    }
    .btn { 
      padding: 18px 35px; 
      background: linear-gradient(45deg, #FF6B6B, #FF8E8E); 
      color: white; 
      text-decoration: none; 
      border-radius: 50px; 
      font-size: clamp(1rem, 3vw, 1.2rem); 
      font-weight: bold; 
      display: inline-flex; align-items: center; gap: 10px;
      transition: all 0.3s ease; 
      box-shadow: 0 10px 25px rgba(255,107,107,0.4);
      min-width: 200px;
      touch-action: manipulation;
    }
    .btn:hover { transform: translateY(-5px) scale(1.05); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
    .whatsapp { background: linear-gradient(45deg, #25D366, #128C7E) !important; box-shadow: 0 10px 25px rgba(37,211,102,0.4) !important; }
    .instapay { background: linear-gradient(45deg, #00C851, #4CAF50) !important; box-shadow: 0 10px 25px rgba(0,200,81,0.4) !important; }
    .course-btn { background: linear-gradient(45deg, #4ECDC4, #44A08D) !important; box-shadow: 0 10px 25px rgba(78,205,196,0.4) !important; }
    .projects { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
      gap: 25px; 
      max-width: 1200px; 
      margin: 50px auto; 
    }
    .project { 
      background: rgba(255,255,255,0.95); 
      padding: 30px; 
      border-radius: 25px; 
      box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
      transition: all 0.4s ease; 
      border: 2px solid transparent;
    }
    .project:hover { 
      transform: translateY(-10px) rotate(1deg); 
      box-shadow: 0 25px 50px rgba(0,0,0,0.2); 
      border-color: #FF6B6B;
    }
    .project h3 { color: #2C3E50; margin-bottom: 15px; font-size: 1.4rem; }
    .project p { color: #7F8C8D; margin-bottom: 20px; line-height: 1.6; }
    .project-link { 
      background: linear-gradient(45deg, #3498DB, #2980B9); 
      color: white; padding: 12px 25px; 
      border-radius: 30px; text-decoration: none; 
      font-weight: bold; display: inline-block;
      transition: all 0.3s;
    }
    .project-link:hover { transform: scale(1.1); box-shadow: 0 10px 20px rgba(52,152,219,0.4); }
    #user-status { 
      background: rgba(255,255,255,0.95); 
      padding: 15px 25px; 
      border-radius: 20px; 
      margin: 20px auto; 
      max-width: 600px; 
      font-weight: bold; 
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      display: flex; justify-content: center; align-items: center; gap: 15px; flex-wrap: wrap;
    }
    .status-logged-in { background: linear-gradient(45deg, #00C851, #27AE60) !important; color: white; }
    .status-guest { background: linear-gradient(45deg, #F39C12, #E67E22); color: white; }
    .status-active { background: linear-gradient(45deg, #4ECDC4, #44A08D) !important; color: white; }
    #admin-panel { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
      color: white; padding: 25px; 
      border-radius: 25px; margin: 40px auto; 
      max-width: 500px; display: none; 
      box-shadow: 0 20px 40px rgba(102,126,234,0.3);
    }
    #admin-panel input, #admin-panel textarea { 
      width: 100%; padding: 15px; margin: 12px 0; 
      border-radius: 15px; border: none; font-size: 1rem; 
      background: rgba(255,255,255,0.95);
    }
    @media (max-width: 768px) { 
      .btn-group { flex-direction: column; align-items: center; }
      .btn { min-width: 280px; padding: 20px 40px; }
      .projects { grid-template-columns: 1fr; gap: 20px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="user-status" class="status-guest">
      Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø¶ÙŠÙÙ†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ… | <a href="login.html" class="btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
    </div>

    <h1>ğŸš€ Family Business</h1>
    <div class="hero-text">
      ØªØ¹Ù„Ù… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© ÙÙŠ Ø¯Ù‚Ø§Ø¦Ù‚ØŒ Ø¹Ù„Ù… Ø¹Ø§Ø¦Ù„ØªÙƒ Ø¨Ø¯ÙˆÙ† Ø¯Ø±Ø§Ø³Ø© Ø³Ù†ÙŠÙ†!
    </div>
    
    <div class="btn-group">
      <a href="https://ipn.eg/S/salah.hamed3646/instapay/9kwYEE" class="btn instapay">ğŸ’° Ø§Ø¯ÙØ¹ Ø¹Ø¨Ø± Instapay</a>
      <a href="login.html" class="btn course-btn" id="course-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ±Ø³</a>
      <a href="https://wa.me/201508830993?text=Ù…Ø±Ø­Ø¨Ø§ØŒ Ù…Ù‡ØªÙ… Ø¨Ù€ Family Business! Ø¹Ù†Ø¯ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±: " class="btn whatsapp">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨ Ø¯Ø¹Ù… ÙÙˆØ±ÙŠ</a>
    </div>
    
    <h2 style="font-size: clamp(1.5rem, 5vw, 2rem); margin: 50px 0 30px 0; color: #2C3E50;">â­ Ù…Ø´Ø§Ø±ÙŠØ¹ Demo</h2>
    <div id="projects-container" class="projects">
      <!-- Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡ØªØªØ­Ù…Ù‘Ù„ Ù‡Ù†Ø§ Ù…Ù† localStorage/Firestore -->
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø®ÙÙŠØ© (Ù„Ù„Ø£Ù…Ø§Ù†ØŒ Ø¨Ø³ Ù„Ùˆ Ø¹Ø§ÙŠØ²Ù‡Ø§ Ø§Ø­Ø°ÙÙ‡Ø§) -->
    <div id="admin-panel">
      <h3>ğŸ”§ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h3>
      <input id="admin-pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±: admin123">
      <button class="btn" onclick="toggleAdmin()" style="background: #F39C12;">ÙØªØ­ Ø§Ù„Ù„ÙˆØ­Ø©</button>
      
      <div id="admin-content" style="display: none; margin-top: 25px;">
        <h4>ğŸ¯ ØªÙØ¹ÙŠÙ„ ÙƒÙˆØ±Ø³ Ù„Ø¹Ù…ÙŠÙ„</h4>
        <input id="user-email" placeholder="Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„">
        <button class="btn" onclick="activateUser()" style="background: #00C851;">ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³</button>
        
        <hr style="margin: 30px 0; opacity: 0.3;">
        
        <h4>ğŸ“± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</h4>
        <input id="proj-title" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹">
        <input id="proj-url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø±ÙˆØ¹">
        <textarea id="proj-desc" placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ± (3-4 Ø¬Ù…Ù„)"></textarea>
        <button class="btn" onclick="addProject()" style="background: #4ECDC4;">Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹</button>
        <div id="projects-list"></div>
      </div>
    </div>
  </div>

  <script>
    const ADMIN_PASS = 'admin123';
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (localStorage fallback)
    function loadProjects() {
      const projects = JSON.parse(localStorage.getItem('projects')) || [
        { title: 'Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙƒØ§Ù…Ù„', desc: 'Ù…ØªØ¬Ø± ÙƒØ§Ù…Ù„ Ø¨Ù€ Firebase + Ø¯ÙØ¹Ø§Øª + Ø´Ø­Ù†', url: 'https://ecommerce-demo.com' },
        { title: 'ØªØ·Ø¨ÙŠÙ‚ ØªÙˆØµÙŠÙ„', desc: 'ØªØ·Ø¨ÙŠÙ‚ ØªÙˆØµÙŠÙ„ Ù…Ø¹ tracking Ø­ÙŠ + Ø³Ø§Ø¦Ù‚ÙŠÙ†', url: 'https://delivery-demo.com' },
        { title: 'Ù…Ù†ØµØ© ÙƒÙˆØ±Ø³Ø§Øª', desc: 'Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ø¹ Ø´Ù‡Ø§Ø¯Ø§Øª + Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª', url: 'https://courses-demo.com' }
      ];
      
      let html = '';
      projects.forEach(p => {
        html += `
          <div class="project">
            <h3>âœ¨ ${p.title}</h3>
            <p>${p.desc}</p>
            <a href="${p.url}" target="_blank" class="project-link">ğŸŒ Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</a>
          </div>
        `;
      });
      document.getElementById('projects-container').innerHTML = html;
      
      // Admin projects list
      let adminHtml = '';
      projects.forEach((p, i) => {
        adminHtml += `
          <div class="project" style="background: rgba(255,255,255,0.8); margin: 15px 0;">
            <h3>${p.title}</h3>
            <p>${p.desc}</p>
            <a href="${p.url}" target="_blank" class="project-link" style="font-size: 0.9rem;">ğŸŒ Ø²ÙŠØ§Ø±Ø©</a>
            <button onclick="deleteProject(${i})" style="padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 20px; margin-right: 10px; cursor: pointer;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
          </div>
        `;
      });
      document.getElementById('projects-list').innerHTML = adminHtml;
    }
    
    function addProject() {
      const title = document.getElementById('proj-title').value.trim();
      const url = document.getElementById('proj-url').value.trim();
      const desc = document.getElementById('proj-desc').value.trim();
      
      if (!title || !desc || !url) {
        alert('âœ… Ø£ÙƒÙ…Ù„ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„!');
        return;
      }
      
      const projects = JSON.parse(localStorage.getItem('projects')) || [];
      projects.unshift({ title, url, desc }); // Ø¥Ø¶Ø§ÙØ© ÙÙŠ Ø§Ù„Ø£ÙˆÙ„
      localStorage.setItem('projects', JSON.stringify(projects));
      
      loadProjects();
      document.getElementById('proj-title').value = '';
      document.getElementById('proj-url').value = '';
      document.getElementById('proj-desc').value = '';
      alert('ğŸ‰ ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­!');
    }
    
    function deleteProject(index) {
      if (confirm('ğŸ—‘ï¸ Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ')) {
        const projects = JSON.parse(localStorage.getItem('projects'));
        projects.splice(index, 1);
        localStorage.setItem('projects', JSON.stringify(projects));
        loadProjects();
      }
    }
    
    function toggleAdmin() {
      if (document.getElementById('admin-pass').value === ADMIN_PASS) {
        document.getElementById('admin-panel').style.display = 'block';
        document.getElementById('admin-content').style.display = 'block';
        loadProjects();
      } else {
        alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©!');
      }
    }
    
    async function activateUser() {
      const email = document.getElementById('user-email').value.trim();
      if (!email) {
        alert('ğŸ“§ Ø£Ø¯Ø®Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹');
        return;
      }
      
      try {
        // Firebase integration Ù…Ù† app.js
        if (window.fpActivateCourseByEmail) {
          await window.fpActivateCourseByEmail('admin@familybusiness.com', email);
          alert(`âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³ Ù„Ù€ ${email} ÙÙŠ Firestore!`);
        } else {
          alert(`âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ù…Ø­Ù„ÙŠØ§Ù‹ Ù„Ù€ ${email}. Ø±ÙˆØ­ admin.html Ù„Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ.`);
        }
        document.getElementById('user-email').value = '';
      } catch (error) {
        alert('âŒ Ø®Ø·Ø£: ' + error.message + '
Ø¬Ø±Ø¨ Ù…Ù† admin.html');
      }
    }
    
    // Firebase Auth state
    if (window.fpOnAuthStateChanged) {
      window.fpOnAuthStateChanged((user, hasAccess) => {
        const statusEl = document.getElementById('user-status');
        const courseBtn = document.getElementById('course-btn');
        
        if (user) {
          let statusText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user.email}`;
          let courseText = 'Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ±Ø³';
          
          if (hasAccess) {
            statusText += ' âœ… (Ø§Ù„ÙƒÙˆØ±Ø³ Ù…ÙØ¹Ù‘Ù„)';
            courseText = 'ÙØªØ­ Ø§Ù„ÙƒÙˆØ±Ø³';
          }
          
          statusEl.innerHTML = `
            ${statusText} | 
            <button onclick="window.fpSignOut().then(() => location.reload())" class="btn" style="padding: 12px 20px; font-size: 0.95rem; background: #e74c3c;">Ø®Ø±ÙˆØ¬</button> |
            <a href="admin.html" class="btn" style="padding: 12px 20px; font-size: 0.95rem; background: #9B59B6;">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a>
          `;
          statusEl.className = hasAccess ? 'status-active' : 'status-logged-in';
        } else {
          statusEl.innerHTML = `
            Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¶ÙŠÙÙ†Ø§ Ø§Ù„ÙƒØ±ÙŠÙ…! | 
            <a href="login.html" class="btn" style="padding: 12px 25px; font-size: 0.95rem;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
          `;
          statusEl.className = 'status-guest';
        }
      });
    }
    
    // Initialize
    loadProjects();
  </script>
</body>
</html>
